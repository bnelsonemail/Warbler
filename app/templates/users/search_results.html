{% extends "base.html" %}

{% block content %}
<div class="container mt-4">
  <h1 class="mb-4">Search Results</h1>

  {% if users %}
    <div class="row">
      {% for user in users %}
        <div class="col-md-4 mb-4">
          <div class="card">
            <img src="{{ user.image_url }}" class="card-img-top" alt="{{ user.username }}">
            <div class="card-body">
              <h5 class="card-title">@{{ user.username }}</h5>
              <p class="card-text">
                <strong>Location:</strong> {{ user.location or "N/A" }}
              </p>
              <form method="POST" action="{{
                  url_for('users.follow_user', user_id=user.id)
                  if user not in g.user.following
                  else url_for('users.unfollow_user', user_id=user.id)
              }}">
                {{ form.hidden_tag() }}
                <button type="submit" class="btn btn-{{
                    'primary' if user not in g.user.following else 'danger'
                }}">
                  {{ 'Follow' if user not in g.user.following else 'Unfollow' }}
                </button>
              </form>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <p>No users found matching your search query.</p>
  {% endif %}
</div>
{% endblock %}

